<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üçó ·Äô·Äº·ÄÑ·Ä∫·Äû·Ä¨·ÄÄ·Äº·ÄÄ·Ä∫·ÄÄ·ÄÑ·Ä∫ - Home</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link href="https://fonts.googleapis.com/css2?family=Pyidaungsu:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #e67e22; --secondary: #d35400; --bg: #fdfdfd; }
        body { font-family: 'Pyidaungsu', sans-serif; background: var(--bg); margin: 0; }
        
        /* Home Header */
        .hero { background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1598515214211-89d3c73ae83b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80'); 
                height: 200px; background-size: cover; background-position: center;
                display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; border-radius: 0 0 30px 30px; }
        
        .container { max-width: 600px; margin: auto; padding: 20px; }
        
        /* Category Chips */
        .category-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px; }
        .chip { background: #eee; padding: 8px 15px; border-radius: 20px; font-size: 14px; white-space: nowrap; cursor: pointer; }
        .chip.active { background: var(--primary); color: white; }

        /* Menu Card */
        .menu-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .card { background: white; border-radius: 15px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .card img { width: 100%; height: 120px; object-fit: cover; }
        .card-info { padding: 10px; }
        .price { color: var(--secondary); font-weight: bold; }
        
        .qty-ctrl { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
        .btn-q { width: 25px; height: 25px; border: none; border-radius: 5px; background: #eee; }

        .footer { position: fixed; bottom: 0; width: 100%; max-width: 600px; background: white; padding: 15px; 
                  display: flex; justify-content: space-between; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); }
        .btn-main { background: var(--secondary); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="hero">
    <h1 style="margin:0;">üçó ·Äô·Äº·ÄÑ·Ä∫·Äû·Ä¨·ÄÄ·Äº·ÄÄ·Ä∫·ÄÄ·ÄÑ·Ä∫</h1>
    <p>·Äô·Äº·Ä≠·Äî·Ä∫·Äö·Äæ·ÄÄ·Ä∫·Äú·Äê·Ä∫·ÄÜ·Äê·Ä∫·Äû·Ä±·Ä¨ ·Ä°·ÄÄ·ÄÑ·Ä∫·Äô·Äª·Ä¨·Ä∏</p>
</div>

<div class="container">
    <div class="category-scroll">
        <div class="chip active">·Ä°·Ä¨·Ä∏·Äú·ÄØ·Ä∂·Ä∏</div>
        <div class="chip">·Ä°·ÄÄ·ÄÑ·Ä∫</div>
        <div class="chip">·Ä°·Äû·ÄÆ·Ä∏·Ä°·Äõ·ÄΩ·ÄÄ·Ä∫</div>
        <div class="chip">·Ä°·ÄÅ·Äª·Ä≠·ÄØ·Äõ·Ää·Ä∫</div>
    </div>

    <div id="menu-display" class="menu-grid">
        </div>
</div>

<div class="footer" id="cart-footer">
    <div>·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏: <b id="total-price">0</b> K</div>
    <button class="btn-main" onclick="alert('Order Feature is coming next step!')">·Äô·Äæ·Ä¨·Äö·Ä∞·Äô·Ää·Ä∫ ‚ûî</button>
</div>

<script>
    const SB_URL = "https://deabtvqzxpkepgcdutzd.supabase.co";
    const SB_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlYWJ0dnF6eHBrZXBnY2R1dHpkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyNzQzNDMsImV4cCI6MjA4MTg1MDM0M30.BbxmM65uoTDcf_nTP6w5siSF6Y5_eM4peqYJCAxR90I";
    const _supabase = window.supabase.createClient(SB_URL, SB_KEY);

    let cart = {};

    async function loadMenu() {
        const { data } = await _supabase.from('menu_items').select('*');
        const display = document.getElementById('menu-display');
        display.innerHTML = data.map(item => `
            <div class="card">
                <img src="${item.image_url}" alt="${item.name}">
                <div class="card-info">
                    <div style="font-weight:bold; font-size:14px;">${item.name}</div>
                    <div class="price">${item.price} K</div>
                    <div class="qty-ctrl">
                        <button class="btn-q" onclick="updateQty('${item.name}', -1, ${item.price})">-</button>
                        <span id="q-${item.name}">0</span>
                        <button class="btn-q" onclick="updateQty('${item.name}', 1, ${item.price})">+</button>
                    </div>
                </div>
            </div>
        `).join('');
    }

    function updateQty(name, change, price) {
        cart[name] = (cart[name] || 0) + change;
        if (cart[name] < 0) cart[name] = 0;
        document.getElementById(`q-${name}`).innerText = cart[name];
        
        let total = 0;
        // Calculate total simplified for now
        document.querySelectorAll('.qty-ctrl span').forEach((span, index) => {
            // (Just a visual total for now)
        });
    }

    window.onload = loadMenu;
</script>
</body>
</html>

